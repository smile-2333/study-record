#+TITLE: keycloak
#+STARTUP: indent
* keycloak
redhat的开源认证方案，支持多种认证模型，基于角色Permission，和细粒度Permission
docker run -d -p 8080:8080 --name keycloak -e KEYCLOAK_USER=admin -e KEYCLOAK_PASSWORD=admin quay.io/keycloak/keycloak:12.0.4
** provider
默认只支持keboro和LDAP，如果要自己接入，要自定义Provider进行打包，存在两种部署的做法
1. Keycloak Deployer，直接丢进/opt/jboss/keycloak/standalone/deployments，jBoss会自动解包(类似Tomcat)
2. 涉及自定义的SPI，Register a provider using Modules
https://www.baeldung.com/java-keycloak-custom-user-providers
https://www.keycloak.org/docs/latest/server_development/#_providers
常规情况下，使用第一种，可以用内嵌keycloak在JUnit对provider进行测试，之后打包部署即可
** realm
多个共享账户的域，用于区分多个账号体系
** client
多个接入的app
** client code
一组Mapper，用于映射字段

scope配置role，描述-->在登陆的用户拥有该角色时该scope的Mapper才生效，没有则代表全部都生效
** Roles
纯字段描述
** mysql as db
https://stackoverflow.com/questions/62107991/keycloak-in-docker-container-mysql-on-host-gives-org-keycloak-services-serv
* ref
https://blog.csdn.net/little_kelvin/article/details/111239241
https://blog.csdn.net/little_kelvin/article/details/111303674
https://www.baeldung.com/postman-keycloak-endpoints postman endpoint test
* theme
https://stackoverflow.com/questions/52641379/keycloak-deploy-custom-theme-in-docker/52755388
